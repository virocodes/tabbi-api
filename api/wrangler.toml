name = "tabbi-api"
main = "src/index.ts"
compatibility_date = "2024-05-12"
compatibility_flags = ["nodejs_compat"]

[vars]
# Non-secret configuration
# SANDBOX_SERVICE_URL is set via wrangler secret for flexibility

# Secrets (set via wrangler secret put)
# SANDBOX_SERVICE_URL
# SANDBOX_SERVICE_API_KEY
# SUPABASE_URL - Supabase project URL (e.g., https://xxx.supabase.co)
# SUPABASE_SERVICE_KEY - Supabase service_role key (Settings > API)
# UPSTASH_REDIS_URL
# UPSTASH_REDIS_TOKEN
# ANTHROPIC_API_KEY

[[durable_objects.bindings]]
name = "SESSION_AGENT"
class_name = "SessionAgent"

[[migrations]]
tag = "v1"
new_sqlite_classes = ["SessionAgent"]

# Development settings
[dev]
port = 8787
local_protocol = "http"

# Production routes (uncomment and configure for deployment)
# [[routes]]
# pattern = "api.your-domain.com/*"
# custom_domain = true
